{"version":3,"file":"js/76.js","mappings":"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","sources":["webpack://medicalbookapp/./src/composebles/useApi.js","webpack://medicalbookapp/./src/pages/users/NotePage.vue","webpack://medicalbookapp/./src/pages/users/NotePage.vue?e12e","webpack://medicalbookapp/./src/pages/users/NotePage.vue?b397","webpack://medicalbookapp/./src/pages/users/NotePage.vue?7591"],"sourcesContent":["/* eslint-disable linebreak-style */\nimport useSupabase from 'boot/supabase';\n// import useAuthUser from './useAuthUser';\n\nexport default function useApi() {\n  const { supabase } = useSupabase();\n\n  // const { user } = useAuthUser();\n\n  const list = async (table) => {\n    const { data, error } = await supabase\n      .from(table)\n      .select('*');\n    if (error) throw error;\n    return data;\n  };\n\n  const getById = async (table, id) => {\n    const { data, error } = await supabase\n      .from(table)\n      .select('*')\n      .eq('id', id);\n    if (error) throw error;\n    return data[0];\n  };\n\n  const getByField = async (table, field, value) => {\n    const { data, error } = await supabase\n      .from(table)\n      .select('*')\n      .eq(field, value);\n    if (error) throw error;\n    return data;\n  };\n  const getNotByField = async (table, field, value) => {\n    const { data, error } = await supabase\n      .from(table)\n      .select('*').neq(field, value);\n    if (error) throw error;\n    return data;\n  };\n\n  const joinTables = async (origin, tables) => {\n\n    const fields = tables.reduce((previousValue, currentValue, index) => {\n\n      return `${previousValue.name}:${previousValue.foreign_key}(${previousValue.fields})` +\n        ',' + `${currentValue.name}:${currentValue.foreign_key}(${currentValue.fields})`\n    });\n\n\n    const { data, error } = await supabase\n      .from(origin)\n      .select(`*,${fields}`)\n    if (error) throw error;\n\n    console.log(data)\n    return data;\n  };\n\n\n  const post = async (table, form) => {\n    const { data, error } = await supabase\n      .from(table)\n      .insert([\n        {\n          ...form,\n          // user_id: user.value.id,\n        },\n      ]);\n    if (error) throw error;\n    return data;\n  };\n\n  const update = async (table, form) => {\n    const { data, error } = await supabase\n      .from(table)\n      .update([\n        { ...form },\n      ])\n      .match({ id: form.id });\n    if (error) throw error;\n    return data;\n  };\n\n  const remove = async (table, id) => {\n    const { data, error } = await supabase\n      .from(table)\n      .delete()\n      .match({ id });\n\n    if (error) throw error;\n    return data;\n  };\n\n  const removeWhere = async (table, field,id) => {\n    const { data, error } = await supabase\n      .from(table)\n      .delete()\n      .match({ [field]: id });\n\n    if (error) throw error;\n    return data;\n  };\n\n\n  return {\n    getByField,\n    getNotByField,\n    list,\n    getById,\n    post,\n    update,\n    remove,\n    removeWhere,\n    joinTables\n  };\n}\n","<template>\n  <q-page padding class=\"row justify-center q-gutter-sm\">\n    <div class=\"col-6 col-xs-12 col-md-6 col-lg-6 col-xl-6\">\n      <q-input\n        class=\"q-mt-md\"\n        outlined\n        rounded\n        bottom-slots\n        v-model=\"text\"\n        placeholder=\"Pesquise uma nota\"\n        dense\n        @update:model-value=\"searchNote()\"\n      >\n      </q-input>\n      <div class=\"q-row\">\n        <div v-for=\"(i, index) in notas\" :key=\"index\">\n          <br />\n          <div class=\"q-pa-md\">\n            <div>\n              <q-input\n                borderless\n                v-model=\"i.content\"\n                filled\n                clearable\n                color=\"red-12\"\n                type=\"textarea\"\n                label=\"Nota\"\n                @blur=\"updateNote(i)\"\n              />\n              <div class=\"textarea-color\"></div>\n            </div>\n            <div class=\"q-mt-sm textarea-rodape\">\n              <strong class=\"row full-width\">\n                <span class=\"col-8 rodape-titulo\">\n                  <q-input\n                    outlined\n                    dense\n                    v-model=\"i.title\"\n                    @blur=\"updateNote(i)\"\n                    type=\"text\"\n                  />\n                </span>\n                <q-btn\n                  class=\"col-1\"\n                  flat\n                  round\n                  icon=\"delete\"\n                  color=\"red-5\"\n                  dense\n                  @click=\"removeNote(index, i.id)\"\n                >\n                </q-btn>\n              </strong>\n              <br /><span v-if=\"i.created_at\">\n                {{\n                  new Date(i.created_at).toLocaleString(\"pt-BR\", { timeZone: \"UTC\" })\n                }}</span\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n      <q-page-sticky position=\"bottom-right\" :offset=\"[18, 18]\">\n        <q-btn\n          @click=\"addDataBase\"\n          fab\n          color=\"green\"\n          icon=\"add\"\n          class=\"flax absolute-down\"\n        />   <q-inner-loading :showing=\"loading\" color=\"primary\" />\n      </q-page-sticky>\n      <br />\n   \n    </div>\n  </q-page>\n</template>\n\n<script>\nimport { useQuasar } from \"quasar\";\nimport { getNote } from \"src/store/note/actions\";\nimport { defineComponent, ref, onMounted } from \"vue\";\n// import TextArea from 'components/TextArea.vue';\nimport useApi from \"../../composebles/useApi\";\nimport useAuthUser from \"../../composebles/useAuthUser\";\n\nexport default defineComponent({\n  name: \"NotePage\",\n  setup() {\n    const loading = ref(false);\n\n    const { user } = useAuthUser();\n\n    const notas = ref([]);\n\n    const form = ref({\n      content: \"\",\n      title: \"\",\n      date: null,\n      user_id: user.value.id,\n    });\n\n    const { post, getByField, update, remove } = useApi();\n    const $q = useQuasar();\n\n    const updateNote = async (note) => {\n      try {\n        await update(\"notas\", note);\n\n        $q.notify({\n          type: \"positive\",\n          message: `${note.title} atualizada`,\n        });\n      } catch (error) {\n        alert(error.message);\n      }\n    };\n\n    const addDataBase = async () => {\n      try {\n        const note = await post(\"notas\", {\n          title: \"Título da nota\",\n          content: \"Conteúdo\",\n          user_id: user.value.id,\n        });\n\n        $q.notify({\n          type: \"positive\",\n          message: \"Nota criada com sucesso!!\",\n        });\n        notas.value.push(note[0]);\n      } catch (error) {\n        alert(error.message);\n      }\n\n      lastNotes.value = [...notas.value];\n    };\n\n    const removeNote = async (index, id) => {\n      if (id) {\n        const isOk = confirm(\"Deseja realmente apagar essa nota?\");\n\n        if (isOk) {\n          await remove(\"notas\", id);\n          $q.notify({\n            type: \"warning\",\n            message: \"Nota elimana com sucesso!!\",\n          });\n          notas.value.splice(index, 1);\n        }\n      } else {\n        notas.value.splice(index, 1);\n      }\n      lastNotes.value = [...notas.value];\n    };\n\n    const text = ref(\"\");\n\n    const lastNotes = ref([]);\n\n    const searchNote = () => {\n      if (!text.value.trim().length) {\n        notas.value = [...lastNotes.value];\n      } else {\n        const result = notas.value.filter((note) => {\n          const searchNoteTitle = note.title.trim().toLowerCase();\n          const searchNoteContent = note.content.trim().toLowerCase();\n          const textSearch = text.value.trim().toLowerCase();\n          return (\n            searchNoteTitle.includes(textSearch) || searchNoteContent.includes(textSearch)\n          );\n        });\n        notas.value = [...result];\n      }\n    };\n\n    const getNoteByUser = async () => {\n      try {\n        loading.value = true;\n        notas.value = await getByField(\"notas\", \"user_id\", user.value.id);\n        lastNotes.value = [...notas.value]\n      } catch (error) {\n        alert(error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n    onMounted(() => {\n      getNoteByUser();\n    });\n\n    return {\n      updateNote,\n      searchNote,\n      removeNote,\n      addDataBase,\n      text,\n      loading,\n      notas,\n      color: {\n        type: String,\n        default: \"red\",\n      },\n    };\n  },\n});\n</script>\n","export * from \"-!../../../node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[3]!../../../node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./NotePage.vue?vue&type=template&id=0c24689a\"","export { default } from \"-!../../../node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./NotePage.vue?vue&type=script&lang=js\"; export * from \"-!../../../node_modules/@quasar/app/lib/webpack/loader.js.transform-quasar-imports.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-2.use[0]!../../../node_modules/@quasar/app/lib/webpack/loader.vue.auto-import-quasar.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./NotePage.vue?vue&type=script&lang=js\"","import { render } from \"./NotePage.vue?vue&type=template&id=0c24689a\"\nimport script from \"./NotePage.vue?vue&type=script&lang=js\"\nexport * from \"./NotePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/patriciopedro/Desktop/Programming/JavaScript/Projects/medicalboo-app/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__\nimport QPage from 'quasar/src/components/page/QPage.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QPageSticky from 'quasar/src/components/page-sticky/QPageSticky.js';\nimport QInnerLoading from 'quasar/src/components/inner-loading/QInnerLoading.js';\nimport qInstall from \"../../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(script, 'components', {QPage,QInput,QBtn,QPageSticky,QInnerLoading});\n"],"names":["useSupabase","useApi","supabase","list","table","data","error","from","select","getById","id","eq","getByField","field","value","getNotByField","neq","joinTables","origin","tables","fields","reduce","previousValue","currentValue","index","name","foreign_key","console","log","post","form","insert","update","match","remove","delete","removeWhere"],"sourceRoot":""}