"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[642],{811:(a,e,o)=>{o.d(e,{Z:()=>t});var l=o(2421);function t(){const{supabase:a}=(0,l["default"])(),e=async e=>{const{data:o,error:l}=await a.from(e).select("*");if(l)throw l;return o},o=async(e,o)=>{const{data:l,error:t}=await a.from(e).select("*").eq("id",o);if(t)throw t;return l[0]},t=async(e,o,l)=>{const{data:t,error:s}=await a.from(e).select("*").eq(o,l);if(s)throw s;return t},s=async(e,o)=>{const l=o.reduce(((a,e,o)=>`${a.name}:${a.foreign_key}(${a.fields}),${e.name}:${e.foreign_key}(${e.fields})`)),{data:t,error:s}=await a.from(e).select(`*,${l}`);if(s)throw s;return console.log(t),t},r=async(e,o)=>{const{data:l,error:t}=await a.from(e).insert([{...o}]);if(t)throw t;return l},i=async(e,o)=>{const{data:l,error:t}=await a.from(e).update([{...o}]).match({id:o.id});if(t)throw t;return l},n=async(e,o)=>{const{data:l,error:t}=await a.from(e).delete().match({id:o});if(t)throw t;return l},c=async(e,o,l)=>{const{data:t,error:s}=await a.from(e).delete().match({[o]:l});if(s)throw s;return t};return{getByField:t,list:e,getById:o,post:r,update:i,remove:n,removeWhere:c,joinTables:s}}},642:(a,e,o)=>{o.r(e),o.d(e,{default:()=>L});var l=o(3673),t=o(2323);const s=a=>((0,l.dD)("data-v-9e167360"),a=a(),(0,l.Cn)(),a),r={class:"column",align:"center"},i={class:"col item"},n={class:"col item"},c={key:0,style:{margin:"0"}},u=s((()=>(0,l._)("span",null,"Assinatura Gratis",-1))),d={class:"col item q-ma-md"},p={class:"row"},m={class:"col"},f={class:"col"},v={class:"col item"},g={class:"column q-ma-md"},w={class:"col"},y={class:"text-h6 row items-center q-pb-none"},b=s((()=>(0,l._)("div",null,"Avalie o App",-1))),h={class:"q-pa-md"},q=(0,l.Uk)("Obrigado pela sua classificação, ajudar-nos-a a melhorar o App: ");function _(a,e,o,s,_,k){const S=(0,l.up)("q-icon"),W=(0,l.up)("q-badge"),A=(0,l.up)("q-btn"),Z=(0,l.up)("q-spinner"),C=(0,l.up)("q-space"),P=(0,l.up)("q-card-section"),Q=(0,l.up)("q-rating"),x=(0,l.up)("q-form"),$=(0,l.up)("q-separator"),z=(0,l.up)("q-card"),B=(0,l.up)("q-dialog"),H=(0,l.up)("q-page"),D=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(H,{class:"flex flex-center"},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",i,[(0,l.Wm)(A,{style:{background:"#1A4B9A",color:"#1378B3"},round:"",icon:"fas fa-user",size:"40px"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"pic",style:{background:"#49D16B"},rounded:""},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{dense:"",name:"eva-camera-outline",color:"white",size:"30px"})])),_:1})])),_:1})]),(0,l._)("div",n,[a.user?((0,l.wg)(),(0,l.iD)("h6",c,(0,t.zw)(a.user.user_metadata.name),1)):(0,l.kq)("",!0),u]),(0,l._)("div",d,[(0,l._)("div",p,[(0,l._)("div",m,[(0,l.Wm)(A,{to:"meus-dados","no-caps":"",outline:"",unelevated:"",rounded:"",label:"Meus dados",class:"btn-profile btn-sec"})]),(0,l._)("div",f,[(0,l.Wm)(A,{to:{name:"prime"},"no-caps":"","no-wrap":"",unelevated:"",rounded:"","text-color":"black",icon:"fas fa-crown",label:"Quero ser Prime",class:"btn-profile btn-prime"})])])]),a.loading?((0,l.wg)(),(0,l.j4)(Z,{key:0,class:"absolute-center",size:"xl",color:"primary"})):(0,l.kq)("",!0),(0,l._)("div",v,[(0,l._)("div",g,[(0,l._)("div",w,[(0,l.Wm)(A,{onClick:e[0]||(e[0]=e=>a.dialogAvaliarApp=!0),align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Avalie o app","icon-right":"eva-arrow-ios-forward-outline",class:"btn-opcao"}),(0,l.Wm)(A,{align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Convide amigos","icon-right":"eva-arrow-ios-forward-outline",class:"btn-opcao"}),(0,l.Wm)(A,{to:"/codigo-acesso",align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Código de acesso","icon-right":"eva-arrow-ios-forward-outline",class:"btn-opcao"}),(0,l.Wm)(A,{align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Suporte","icon-right":"eva-arrow-ios-forward-outline",class:"btn-opcao"}),(0,l.Wm)(A,{align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Sobre o app","icon-right":"eva-arrow-ios-forward-outline",class:"btn-opcao"}),(0,l.Wm)(A,{onClick:a.handleLogout,align:"left",flat:"","no-caps":"",style:{color:"black"},label:"Sair",class:"btn-opcao"},null,8,["onClick"])])])])]),(0,l.Wm)(B,{modelValue:a.dialogAvaliarApp,"onUpdate:modelValue":e[2]||(e[2]=e=>a.dialogAvaliarApp=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{style:{"min-width":"350px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{class:"q-pb-none"},{default:(0,l.w5)((()=>[(0,l._)("div",y,[b,(0,l.Wm)(C),(0,l.wy)((0,l.Wm)(A,{icon:"close",flat:"",round:"",dense:""},null,512),[[D]])])])),_:1}),(0,l._)("div",h,[(0,l.Wm)(x,{onSubmit:a.onSubmit,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{name:"Qualidade",modelValue:a.quality,"onUpdate:modelValue":e[1]||(e[1]=e=>a.quality=e),max:"5",size:"3.5em",color:"yellow",icon:"star_border","icon-selected":"star","no-dimming":""},null,8,["modelValue"]),(0,l._)("div",null,[(0,l.Wm)(A,{label:"Classificar",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"]),a.submitResult.length>0?((0,l.wg)(),(0,l.j4)(z,{key:0,flat:"",bordered:"",class:"q-mt-md bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[q])),_:1}),(0,l.Wm)($),(0,l.Wm)(P,{class:"row q-gutter-sm items-center"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.submitResult,((e,o)=>((0,l.wg)(),(0,l.iD)("div",{key:o,class:"q-px-sm q-py-xs bg-grey-8 text-white rounded-borders text-center text-no-wrap"},(0,t.zw)(e.name)+" = "+(0,t.zw)(20*e.value)+(0,t.zw)(a.porcento),1)))),128))])),_:1})])),_:1})):(0,l.kq)("",!0)])])),_:1})])),_:1},8,["modelValue"])])),_:1})}o(2100),o(5363),o(71);var k=o(4605),S=o(1959),W=o(4958),A=o(811),Z=o(9582),C=o(8825);const P=(0,l.aZ)({name:"ProfilePage",setup(){const a=(0,C.Z)(),e=(0,Z.tv)(),{post:o,getByField:t,update:s}=(0,A.Z)(),r=(0,Z.yj)(),{token:i}=r.query,{logout:n,user:c,resetPassword:u}=(0,W.Z)(),d=(0,S.iH)(!1),p=(0,S.iH)(!1),m=(0,S.iH)(!1),f=(0,S.iH)(0),v=(0,S.iH)([]),g=(0,S.iH)({password:"",password1:"",antigo:""}),w=(0,S.iH)({id:null,valor:0,user_id:""}),y=async()=>{try{if(null===w.value.id){const a=w.value;delete a.id,w.value.user_id=c.value.id,m.value=!0,await o("classification",a),m.value=!1}else w.value.user_id=c.value.id,w.value.valor=f.value,m.value=!0,await s("classification",w.value),m.value=!1}catch(a){m.value=!1,(0,k.s)(`Classificação Não Foi Bem Sucedida Pelo Seguinte Erro: ${JSON.stringify(a)}`)}},b=async()=>{g.value.password!==g.value.password1?a.dialog({title:"Falhou!",message:"Senha Errada... Pretendes Repetir ?",cancel:!0,persistent:!0}).onOk((async()=>{d.value=!0})):a.dialog({title:"Alterar Senha:",message:"Tens a certeza que queres alterar a Senha ?",cancel:!0,persistent:!0}).onOk((async()=>{try{m.value=!0,c.value.password=g.value.password1,await u(i,g.value.password),m.value=!1,(0,k.L)(`Alteração Feita Com sucesso : ${g.value.password1}`)}catch(a){m.value=!1,(0,k.s)(`Alteração Não Foi Bem Sucedido Pelo Seguinte Erro: ${JSON.stringify(a)}`)}}))},h=async()=>{a.dialog({title:"Sair",message:"Tens a certeza que queres Sair ?",cancel:!0,persistent:!0}).onOk((async()=>{try{m.value=!0,await n(),m.value=!1,e.replace({name:"login"})}catch(a){m.value=!1,(0,k.s)(`A Sessão Não Pode Ser Terminada Pelo Seguinte Erro: ${JSON.stringify(a)}`)}}))},q=async()=>{try{const a=0,e=await t("classification",w.value.user_id,a);if(e.length>0){const a=e.map((a=>a.id));w.value.id=a[0],f.value=e.map((a=>a.valor))}else f.value=0}catch(a){(0,k.s)(`A Sessão Não Pode Ser Terminada Pelo Seguinte Erro: ${JSON.stringify(a)}`)}};return(0,l.bv)((async()=>{q()})),{porcento:"%",user:c,table:w,dialogAvaliarApp:p,formData:g,loading:m,dialogPassword:d,updatPassword:b,handleLogout:h,updatClassification:y,slide:(0,S.iH)("style"),quality:f,submitResult:v,onSubmit(a){const e=new FormData(a.target),o=[];for(const[l,t]of e.entries())o.push({name:l,value:t}),w.value.valor=t;v.value=o,y()}}}});var Q=o(4260),x=o(4379),$=o(2165),z=o(9721),B=o(4554),H=o(6833),D=o(6778),F=o(151),N=o(5589),O=o(2025),j=o(5269),V=o(8833),E=o(5869),R=o(677),T=o(7518),J=o.n(T);const I=(0,Q.Z)(P,[["render",_],["__scopeId","data-v-9e167360"]]),L=I;J()(P,"components",{QPage:x.Z,QBtn:$.Z,QBadge:z.Z,QIcon:B.Z,QSpinner:H.Z,QDialog:D.Z,QCard:F.Z,QCardSection:N.Z,QSpace:O.Z,QForm:j.Z,QRating:V.Z,QSeparator:E.Z}),J()(P,"directives",{ClosePopup:R.Z})}}]);