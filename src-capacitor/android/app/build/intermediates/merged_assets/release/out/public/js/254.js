"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[254],{811:(e,t,a)=>{a.d(t,{Z:()=>l});var o=a(2421);function l(){const{supabase:e}=(0,o["default"])(),t=async t=>{const{data:a,error:o}=await e.from(t).select("*");if(o)throw o;return a},a=async(t,a)=>{const{data:o,error:l}=await e.from(t).select("*").eq("id",a);if(l)throw l;return o[0]},l=async(t,a,o)=>{const{data:l,error:n}=await e.from(t).select("*").eq(a,o);if(n)throw n;return l},n=async(t,a)=>{const o=a.reduce(((e,t,a)=>`${e.name}:${e.foreign_key}(${e.fields}),${t.name}:${t.foreign_key}(${t.fields})`)),{data:l,error:n}=await e.from(t).select(`*,${o}`);if(n)throw n;return console.log(l),l},r=async(t,a)=>{const{data:o,error:l}=await e.from(t).insert([{...a}]);if(l)throw l;return o},s=async(t,a)=>{const{data:o,error:l}=await e.from(t).update([{...a}]).match({id:a.id});if(l)throw l;return o},i=async(t,a)=>{const{data:o,error:l}=await e.from(t).delete().match({id:a});if(l)throw l;return o},c=async(t,a,o)=>{const{data:l,error:n}=await e.from(t).delete().match({[a]:o});if(n)throw n;return l};return{getByField:l,list:t,getById:a,post:r,update:s,remove:i,removeWhere:c,joinTables:n}}},8254:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var o=a(3673),l=a(2323);const n={class:"col-6 col-xs-12 col-md-6 col-lg-6 col-xl-6"},r={class:"q-row"},s=(0,o._)("br",null,null,-1),i={class:"q-pa-md"},c=(0,o._)("div",{class:"textarea-color"},null,-1),u={class:"q-mt-sm textarea-rodape"},d={class:"row full-width"},m={class:"col-8 rodape-titulo"},p=(0,o._)("br",null,null,-1),f={key:0},w=(0,o._)("br",null,null,-1);function g(e,t,a,g,v,y){const h=(0,o.up)("q-icon"),_=(0,o.up)("q-input"),k=(0,o.up)("q-btn"),b=(0,o.up)("q-page-sticky"),q=(0,o.up)("q-inner-loading"),Z=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(Z,{padding:"",class:"row justify-center q-gutter-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(_,{class:"q-mt-md",outlined:"",rounded:"","bottom-slots":"",modelValue:e.text,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.text=t),t[2]||(t[2]=t=>e.searchNote())],placeholder:"Pesquise uma nota",dense:""},{append:(0,o.w5)((()=>[""!==e.text?((0,o.wg)(),(0,o.j4)(h,{key:0,name:"close",onClick:t[0]||(t[0]=t=>e.text=""),class:"cursor-pointer"})):(0,o.kq)("",!0),(0,o.Wm)(h,{name:"search"})])),_:1},8,["modelValue"]),(0,o._)("div",r,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.notas,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},[s,(0,o._)("div",i,[(0,o._)("div",null,[(0,o.Wm)(_,{borderless:"",modelValue:t.content,"onUpdate:modelValue":e=>t.content=e,filled:"",clearable:"",color:"red-12",type:"textarea",label:"Nota",onBlur:a=>e.updateNote(t)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),c]),(0,o._)("div",u,[(0,o._)("strong",d,[(0,o._)("span",m,[(0,o.Wm)(_,{outlined:"",dense:"",modelValue:t.title,"onUpdate:modelValue":e=>t.title=e,onBlur:a=>e.updateNote(t),type:"text"},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),(0,o.Wm)(k,{class:"col-1",flat:"",round:"",icon:"delete",color:"red-5",dense:"",onClick:o=>e.removeNote(a,t.id)},null,8,["onClick"])]),p,t.created_at?((0,o.wg)(),(0,o.iD)("span",f,(0,l.zw)(new Date(t.created_at).toLocaleString("pt-BR",{timeZone:"UTC"})),1)):(0,o.kq)("",!0)])])])))),128))]),(0,o.Wm)(b,{position:"bottom-right",offset:[18,18]},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{onClick:e.addDataBase,fab:"",color:"green",icon:"add",class:"flax absolute-down"},null,8,["onClick"])])),_:1}),w,(0,o.Wm)(q,{showing:e.loading,color:"primary"},null,8,["showing"])])])),_:1})}a(71),a(6801);var v=a(8825),y=(a(2605),a(1959)),h=a(811),_=a(4958);const k=(0,o.aZ)({name:"NotePage",setup(){const e=(0,y.iH)(!1),{user:t}=(0,_.Z)(),a=(0,y.iH)([]),{post:l,getByField:n,update:r,remove:s}=((0,y.iH)({content:"",title:"",date:null,user_id:t.value.id}),(0,h.Z)()),i=(0,v.Z)(),c=async e=>{try{await r("notas",e),i.notify({type:"positive",message:`${e.title} atualizada`})}catch(t){alert(t.message)}},u=async()=>{try{const e=await l("notas",{title:"Título da nota",content:"Conteúdo",user_id:t.value.id});i.notify({type:"positive",message:"Nota criada com sucesso!!"}),a.value.push(e[0])}catch(e){alert(e.message)}p.value=[...a.value]},d=async(e,t)=>{if(t){const o=confirm("Deseja realmente apagar essa nota?");o&&(await s("notas",t),i.notify({type:"warning",message:"Nota elimana com sucesso!!"}),a.value.splice(e,1))}else a.value.splice(e,1);p.value=[...a.value]},m=(0,y.iH)(""),p=(0,y.iH)([]),f=()=>{if(m.value.trim().length){const e=a.value.filter((e=>{const t=e.title.trim().toLowerCase(),a=e.content.trim().toLowerCase(),o=m.value.trim().toLowerCase();return t.includes(o)||a.includes(o)}));a.value=[...e]}else a.value=[...p.value]},w=async()=>{try{e.value=!0,a.value=await n("notas","user_id",t.value.id)}catch(o){alert(o.message)}finally{e.value=!1}};return(0,o.bv)((()=>{w()})),{updateNote:c,searchNote:f,removeNote:d,addDataBase:u,text:m,loading:e,notas:a,color:{type:String,default:"red"}}}});var b=a(4260),q=a(4379),Z=a(4842),x=a(4554),C=a(2165),B=a(1007),N=a(6941),V=a(7518),W=a.n(V);const $=(0,b.Z)(k,[["render",g]]),D=$;W()(k,"components",{QPage:q.Z,QInput:Z.Z,QIcon:x.Z,QBtn:C.Z,QPageSticky:B.Z,QInnerLoading:N.Z})}}]);