"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[563],{811:(e,a,l)=>{l.d(a,{Z:()=>r});var o=l(2421);function r(){const{supabase:e}=(0,o["default"])(),a=async a=>{const{data:l,error:o}=await e.from(a).select("*");if(o)throw o;return l},l=async(a,l)=>{const{data:o,error:r}=await e.from(a).select("*").eq("id",l);if(r)throw r;return o[0]},r=async(a,l,o)=>{const{data:r,error:s}=await e.from(a).select("*").eq(l,o);if(s)throw s;return r},s=async(a,l)=>{const o=l.reduce(((e,a,l)=>`${e.name}:${e.foreign_key}(${e.fields}),${a.name}:${a.foreign_key}(${a.fields})`)),{data:r,error:s}=await e.from(a).select(`*,${o}`);if(s)throw s;return console.log(r),r},t=async(a,l)=>{const{data:o,error:r}=await e.from(a).insert([{...l}]);if(r)throw r;return o},i=async(a,l)=>{const{data:o,error:r}=await e.from(a).update([{...l}]).match({id:l.id});if(r)throw r;return o},n=async(a,l)=>{const{data:o,error:r}=await e.from(a).delete().match({id:l});if(r)throw r;return o},d=async(a,l,o)=>{const{data:r,error:s}=await e.from(a).delete().match({[l]:o});if(s)throw s;return r};return{getByField:r,list:a,getById:l,post:t,update:i,remove:n,removeWhere:d,joinTables:s}}},6563:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});l(6801);var o=l(3673),r=l(2323);const s={class:"flex q-pt-xl flex-center"},t={class:"column",style:{"min-width":"90%"}},i={class:"col q-ma-xs"},n=(0,o._)("h5",{class:"col-12 title",style:{margin:"20px 0"}},"Usuários Admin",-1),d={style:{width:"100px"},class:"row q-gutter-sm"},m={class:"q-mt-md"},u=(0,o._)("p",null,"Admin",-1),p=(0,o._)("div",{class:"text-h6"},"Novo Usuário Admin",-1),c={class:"q-pa-md"},f={class:"q-gutter-md colum"};function w(e,a,l,w,y,v){const _=(0,o.up)("q-btn"),b=(0,o.up)("q-td"),h=(0,o.up)("q-tr"),g=(0,o.up)("q-table"),U=(0,o.up)("q-card-section"),k=(0,o.up)("q-separator"),W=(0,o.up)("q-input"),C=(0,o.up)("q-select"),q=(0,o.up)("q-card-actions"),V=(0,o.up)("q-form"),z=(0,o.up)("q-card"),Z=(0,o.up)("q-dialog"),Q=(0,o.up)("q-inner-loading"),D=(0,o.Q2)("ripple"),S=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o._)("div",t,[(0,o._)("div",i,[(0,o._)("div",null,[n,(0,o._)("div",d,[(0,o.Wm)(_,{icon:"add",color:"primary",class:"col",onClick:a[0]||(a[0]=a=>e.newDialog())}),(0,o.Wm)(_,{icon:"update",color:"primary",class:"col",onClick:a[1]||(a[1]=a=>e.listAll())})])]),(0,o._)("div",m,[(0,o.Wm)(g,{color:"primary",dense:e.$q.screen.lt.sm,flat:"",square:"",bordered:"",title:"Lista de Usuários",rows:e.rows,columns:e.columns,"visible-columns":["title","data","cpf","nacionalidade","perfil","email","telefone","options"],"row-key":"title",separator:"cell"},{body:(0,o.w5)((a=>[(0,o.Wm)(h,{props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{key:"title",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"data",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.data),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"cpf",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.cpf),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"nacionalidade",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.nacionalidade),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"perfil",props:a},{default:(0,o.w5)((()=>[u])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"email",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.email),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"telefone",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.row.phone),1)])),_:2},1032,["props"]),(0,o.Wm)(b,{key:"options",class:"text-right",props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{flat:"",square:"",icon:"edit",onClick:l=>e.newDialog(a.row),dense:""},null,8,["onClick"]),(0,o.Wm)(_,{flat:"",square:"",icon:"delete",onClick:l=>e.confirmDelete(a.row.id),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["dense","rows","columns"])])])]),(0,o.Wm)(Z,{modelValue:e.dialogUser,"onUpdate:modelValue":a[12]||(a[12]=a=>e.dialogUser=a),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{onSubmit:e.saveItem},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{class:"q-py-sm"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(k),(0,o.Wm)(U,{class:"scroll",style:{"max-height":"77vh"}},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o._)("div",f,[(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formUser.name=a),outlined:"",type:"text",label:"Nome completo","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.birthday,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formUser.birthday=a),outlined:"",type:"date",label:"Data de nascimento","stack-label":"","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.cpf,"onUpdate:modelValue":a[4]||(a[4]=a=>e.formUser.cpf=a),outlined:"",label:"CPF","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(C,{class:"col",dense:"",outlined:"",modelValue:e.formUser.nationality,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formUser.nationality=a),options:e.options,label:"Nacionalidade"},null,8,["modelValue","options"]),(0,o.Wm)(k),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.email,"onUpdate:modelValue":a[6]||(a[6]=a=>e.formUser.email=a),outlined:"",type:"email",label:"Email","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{dense:"",class:"col",modelValue:e.formUser.confirm_email,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formUser.confirm_email=a),outlined:"",type:"email",label:"Confirme o email","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio",a=>a.trim()===e.formUser.email.trim()||"Email não correspondente"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.password,"onUpdate:modelValue":a[8]||(a[8]=a=>e.formUser.password=a),outlined:"",type:"password",label:"Senha","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.confirm_password,"onUpdate:modelValue":a[9]||(a[9]=a=>e.formUser.confirm_password=a),outlined:"",type:"password",label:"Confirme a senha","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio",a=>a.trim()===e.formUser.password.trim()||"Senha não correspondente"]},null,8,["modelValue","rules"]),(0,o.Wm)(W,{class:"col",dense:"",modelValue:e.formUser.phone,"onUpdate:modelValue":a[10]||(a[10]=a=>e.formUser.phone=a),outlined:"",label:"Telefone",mask:"(##) #### - ####",hint:"Mask: (##) #### - ####","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,o.Wm)(k),(0,o.Wm)(q,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(_,{label:"Cancelar ",onClick:a[11]||(a[11]=a=>e.loading=!1),color:"primary","no-caps":"",dense:""},null,512),[[D],[S]]),(0,o.wy)((0,o.Wm)(_,{label:"Salvar",color:"primary",dense:"",type:"submit","no-caps":""},null,512),[[D]])])),_:1})])])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),e.loading?((0,o.wg)(),(0,o.j4)(Q,{key:0,label:"Atualizando...","label-class":"text-primary",color:"primary","label-style":"font-size: 1.1em"})):(0,o.kq)("",!0)])}l(2100);var y=l(4605),v=l(1959),_=l(8825),b=l(4958),h=l(811);const g=[{name:"title",required:!0,label:"Nome",align:"left",field:"title",sortable:!0},{name:"data",align:"left",label:"Data de Nascimento",field:"data",sortable:!0},{name:"cpf",align:"left",label:"CPF",field:"CPF",sortable:!0},{name:"nacionalidade",align:"left",label:"Nacionalidade",field:"Nacionalidade",sortable:!0},{name:"perfil",align:"left",label:"Perfil",field:"perfil",sortable:!0},{name:"email",align:"left",label:"E-mail",field:"E-mail",sortable:!0},{name:"telefone",align:"left",label:"Telefone",field:"telefone",sortable:!0},{name:"options",align:"right",label:"Ação",field:"options",sortable:!0}],U=(0,o.aZ)({setup(){const e=(0,v.iH)(!0),a=(0,_.Z)(),l=(0,v.iH)(!1),{list:r,post:s,update:t,remove:i}=(0,h.Z)(),{user:n,register:d}=(0,b.Z)(),m=(0,v.iH)([]),u=(0,v.iH)([]),p=(0,v.qj)({name:"",id:null}),c=(0,v.qj)({name:"",birthday:"",cpf:"",nationality:"",profile_type_id:3,email:"",password:"",confirm_email:"",confirm_password:"",user_id:null,phone:null,premium:!0}),f=(0,v.iH)([]),w=(0,v.iH)([]),U=(0,v.iH)([]),k=(0,v.iH)([{label:"Estudante",value:1},{label:"Profissional",value:2}]),W=(0,v.iH)([]),C=async()=>{W.value=await r("users")},q=async()=>{try{e.value=!0;const a=await r("perfil");m.value=a.map((e=>({id:e.id,name:e.name,data:e.birthday,cpf:e.cpf,perfil:e.profile_type_id,email:e.email,nacionalidade:e.nationality,user_id:e.user_id,phone:e.phone})));for(let e=0;e<m.value.length;e++)3!==m.value[e].perfil&&(m.value.splice(e,1),e-=1);e.value=!1}catch(a){e.value=!1,alert(JSON.stringify(a))}},V=async a=>{try{e.value=!0,await i("perfil",a),q(),e.value=!1}catch(l){e.value=!1,alert(l)}},z=async()=>{try{if(e.value=!0,c.user_id)delete c.confirm_email,delete c.confirm_password,await t("perfil",c);else{const e=await d(c);(0,y.L)("Dados Cadastrados Com Sucesso!"),c.user_id=e.id,delete c.confirm_email,delete c.confirm_password,await s("perfil",c)}q(),(0,y.L)("Dados Cadastrados Com Sucesso!"),e.value=!1,l.value=!1}catch(a){e.value=!1,l.value=!1,(0,y.s)(`houve uma falha ao carregar os dados para o banco: ${a}`)}},Z=async()=>{try{const a=await r("nationality");f.value=a.map((e=>e.name)),e.value=!1}catch(a){(0,y.s)(`houve uma falha ao carregar os dados do banco: ${a}`)}},Q=async()=>{try{e.value=!0;const a=await r("occupation_area");w.value=a.map((e=>e.occupation_area));const l=await r("graduation_year");U.value=l.map((e=>e.graduation_year)),e.value=!1}catch(a){(0,y.s)(`houve uma falha ao carregar os dados do banco: ${JSON.stringify(a)}`)}},D=e=>{e?(Object.keys(e).forEach((a=>{p[a]=e[a]})),c.name=e.name,c.birthday=e.data,c.cpf=e.cpf,c.nationality=e.nacionalidade,c.profile_type_id=3,c.email=e.email,c.password=e.password,c.confirm_email=e.email,c.confirm_password=e.password,c.user_id=e.user_id):(p.name="",c.name="",c.birthday="",c.cpf="",c.graduation_year="",c.nationality="",c.email="",c.password="",c.confirm_email="",c.confirm_password="",c.user_id=""),l.value=!0};function S(e){a.dialog({title:"Eliminar registro",message:"Gostaria de apagar este registro?",persistent:!0,cancel:"Cancelar"}).onOk((()=>{V(e)})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}return(0,o.bv)((()=>{Q(),Z(),q(),C()})),{user:n,options2:w,options1:U,options:f,tipo:k,confirmDelete:S,newDialog:D,formData:p,formUser:c,loading:e,deleteItem:V,dialogUser:l,saveItem:z,columns:g,rows:m,listAll:q,topics:u,varDialogPassword:(0,v.iH)(!1)}}});var k=l(4260),W=l(2165),C=l(8468),q=l(8186),V=l(3884),z=l(6778),Z=l(151),Q=l(5269),D=l(5589),S=l(5869),x=l(4842),$=l(3017),H=l(9367),N=l(6941),A=l(6489),E=l(677),P=l(7518),I=l.n(P);const T=(0,k.Z)(U,[["render",w]]),j=T;I()(U,"components",{QBtn:W.Z,QTable:C.Z,QTr:q.Z,QTd:V.Z,QDialog:z.Z,QCard:Z.Z,QForm:Q.Z,QCardSection:D.Z,QSeparator:S.Z,QInput:x.Z,QSelect:$.Z,QCardActions:H.Z,QInnerLoading:N.Z}),I()(U,"directives",{Ripple:A.Z,ClosePopup:E.Z})}}]);