"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[455],{811:(a,e,t)=>{t.d(e,{Z:()=>l});var o=t(2421);function l(){const{supabase:a}=(0,o["default"])(),e=async e=>{const{data:t,error:o}=await a.from(e).select("*");if(o)throw o;return t},t=async(e,t)=>{const{data:o,error:l}=await a.from(e).select("*").eq("id",t);if(l)throw l;return o[0]},l=async(e,t,o)=>{const{data:l,error:r}=await a.from(e).select("*").eq(t,o);if(r)throw r;return l},r=async(e,t)=>{const o=t.reduce(((a,e,t)=>`${a.name}:${a.foreign_key}(${a.fields}),${e.name}:${e.foreign_key}(${e.fields})`)),{data:l,error:r}=await a.from(e).select(`*,${o}`);if(r)throw r;return console.log(l),l},i=async(e,t)=>{const{data:o,error:l}=await a.from(e).insert([{...t}]);if(l)throw l;return o},s=async(e,t)=>{const{data:o,error:l}=await a.from(e).update([{...t}]).match({id:t.id});if(l)throw l;return o},c=async(e,t)=>{const{data:o,error:l}=await a.from(e).delete().match({id:t});if(l)throw l;return o},n=async(e,t,o)=>{const{data:l,error:r}=await a.from(e).delete().match({[t]:o});if(r)throw r;return l};return{getByField:l,list:e,getById:t,post:i,update:s,remove:c,removeWhere:n,joinTables:r}}},7455:(a,e,t)=>{t.r(e),t.d(e,{default:()=>I});var o=t(3673),l=t(2323);const r=(0,o._)("div",{class:"text-h5 q-pa-sm"},"Categorias",-1),i={class:"row q-pa-md q-gutter-sm"},s={class:"column",style:{"min-width":"99.9%"}},c=(0,o._)("div",{class:"text-h6"},"Nova categoria",-1);function n(a,e,t,n,d,p){const m=(0,o.up)("q-input"),u=(0,o.up)("q-space"),f=(0,o.up)("q-btn"),w=(0,o.up)("q-card"),y=(0,o.up)("q-td"),g=(0,o.up)("q-tr"),h=(0,o.up)("q-table"),_=(0,o.up)("q-page"),v=(0,o.up)("q-card-section"),b=(0,o.up)("q-card-actions"),q=(0,o.up)("q-form"),W=(0,o.up)("q-dialog"),k=(0,o.up)("q-inner-loading"),C=(0,o.Q2)("ripple"),Z=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(_,{class:"q-pa-md"},{default:(0,o.w5)((()=>[r,(0,o.Wm)(w,{class:"q-mb-sm",flat:"",bordered:""},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(m,{class:"col-7 col-sm-7 col-md-7 col-xs-12 col-lg-7 col-xl-7",modelValue:a.filter,"onUpdate:modelValue":e[0]||(e[0]=e=>a.filter=e),placeholder:"Pesquisar abordagem",dense:"",outlined:""},null,8,["modelValue"]),(0,o.Wm)(u),(0,o.Wm)(f,{class:"col-2 col-sm-2 col-md-2 col-xs-12 col-lg-2 col-xl-2",color:"primary",label:"Nova tipo",onClick:e[1]||(e[1]=e=>a.newDialog()),"no-caps":"",rounded:""}),(0,o.Wm)(f,{class:"col-2 col-sm-2 col-md-2 col-xs-12 col-lg-2 col-xl-2",color:"primary",label:"Atualizar",onClick:e[2]||(e[2]=e=>a.listAll()),"no-caps":"",rounded:""})])])),_:1}),(0,o.Wm)(h,{dense:a.$q.screen.lt.md,flat:"",square:"",bordered:"",title:"Lista de Categorias",rows:a.rows,columns:a.columns,"visible-columns":["title","options"],"row-key":"title",filter:a.filter,separator:"cell"},{body:(0,o.w5)((e=>[(0,o.Wm)(g,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{key:"title",class:"text-center",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(y,{key:"definition",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.definition),1)])),_:2},1032,["props"]),(0,o.Wm)(y,{key:"options",class:"text-center",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{flat:"",square:"",icon:"edit",onClick:t=>a.newDialog(e.row),dense:""},null,8,["onClick"]),(0,o.Wm)(f,{flat:"",square:"",icon:"delete",onClick:t=>a.confirmDelete(e.row.id),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["dense","rows","columns","filter"])])),_:1}),(0,o._)("div",s,[(0,o.Wm)(W,{modelValue:a.dialogCategory,"onUpdate:modelValue":e[4]||(e[4]=e=>a.dialogCategory=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{style:{"min-width":"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[c])),_:1}),(0,o.Wm)(q,{onSubmit:a.saveItem},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{dense:"",modelValue:a.formData.name,"onUpdate:modelValue":e[3]||(e[3]=e=>a.formData.name=e),modelModifiers:{trim:!0},autofocus:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(b,{align:"right",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(f,{label:"Cancelar",color:"primary","no-caps":""},null,512),[[C],[Z]]),(0,o.wy)((0,o.Wm)(f,{label:"Salvar",color:"primary",type:"submit","no-caps":""},null,512),[[C],[Z]])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(k,{showing:a.loading,label:"Atualizando...","label-class":"text-primary",color:"primary","label-style":"font-size: 1.1em"},null,8,["showing"])])],64)}t(71),t(2100);var d=t(1959),p=t(8825),m=t(811);const u=[{name:"title",required:!0,label:"Titulo",align:"center",field:"title",sortable:!0},{name:"options",align:"center",label:"Ação",field:"options",sortable:!0}],f=(0,o.aZ)({setup(){const a=(0,d.iH)(!0),e=(0,p.Z)(),{list:t,post:l,update:r,remove:i,removeWhere:s,getByField:c}=(0,m.Z)(),n=(0,d.iH)([]),f=(0,d.iH)([]),w=(0,d.qj)({name:"",id:null}),y=async()=>{try{a.value=!0,n.value=await t("categoria"),a.value=!1}catch(e){alert(e)}},g=[],h=async e=>{try{a.value=!0,g.value=await c("topic","categoria_id",e),g.forEach((async a=>{const e=await c("approach","topic_id",a.id);e.forEach((async a=>{const e=await c("exameComplementar","approach_id",a.id);e.forEach((async a=>{await i("exameComplementar",a.id)}));const t=await c("definicao","approach_id",a.id);t.forEach((async a=>{await i("definicao",a.id)}));const o=await c("approach_contents","id_approach",a.id);o.forEach((async a=>{await i("approach_contents",a.id)}));const l=await c("favorite_approach_user","approach_id",a.id);l.forEach((async a=>{await i("favorite_approach_user",a.id)})),await i("approach",a.id)}));const t=await c("access_topic_user","topic_id",a.id);t.forEach((async a=>{await i("access_topic_user",a.id)})),await i("topic",a.id)}));for await(let a of g.value)await i("topic",a.id);g.value.forEach((async a=>{await i("topic",a.id),alert(`eliminar${JSON.stringify(a)}`)})),await i("categoria",e)}catch(t){alert(JSON.stringify(t))}finally{y(),a.value=!1}},_=async()=>{try{a.value=!0,w.id?await r("categoria",w):(delete w.id,await l("categoria",w)),y()}catch(e){alert(e)}finally{a.value=!1}};(0,o.bv)((()=>{y()}));const v=async()=>{},b=(0,d.iH)(!1),q=a=>{a?Object.keys(a).forEach((e=>{w[e]=a[e]})):w.name="",b.value=!0};function W(a){e.dialog({title:"Eliminar registro",message:"Gostaria de apagar este registro?",persistent:!0,cancel:"Cancelar"}).onOk((()=>{h(a)})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}const k=(0,d.iH)("");return{filter:k,confirmDelete:W,newDialog:q,formData:w,loading:a,deleteItem:h,dialogCategory:b,saveItem:_,onItemClick:v,columns:u,rows:n,listAll:y,topics:f,varDialogPassword:(0,d.iH)(!1)}}});var w=t(4260),y=t(4379),g=t(151),h=t(4842),_=t(2025),v=t(2165),b=t(8468),q=t(8186),W=t(3884),k=t(6778),C=t(5589),Z=t(5269),x=t(9367),Q=t(6941),D=t(6489),E=t(677),V=t(7518),$=t.n(V);const H=(0,w.Z)(f,[["render",n]]),I=H;$()(f,"components",{QPage:y.Z,QCard:g.Z,QInput:h.Z,QSpace:_.Z,QBtn:v.Z,QTable:b.Z,QTr:q.Z,QTd:W.Z,QDialog:k.Z,QCardSection:C.Z,QForm:Z.Z,QCardActions:x.Z,QInnerLoading:Q.Z}),$()(f,"directives",{Ripple:D.Z,ClosePopup:E.Z})}}]);