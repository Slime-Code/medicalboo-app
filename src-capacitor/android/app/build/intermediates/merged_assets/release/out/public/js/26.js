"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[26],{6201:(e,t,a)=>{function r(e){switch(e){case"User already registered":return"Usuário já cadastrado!";case"Invalid login credentials":return"Usuário ou senha errado!";default:return"Erro ao se conetar com o servidor, verifique a sua conexão com a internet!"}}a.d(t,{y:()=>r})},811:(e,t,a)=>{a.d(t,{Z:()=>o});var r=a(2421);function o(){const{supabase:e}=(0,r["default"])(),t=async t=>{const{data:a,error:r}=await e.from(t).select("*");if(r)throw r;return a},a=async(t,a)=>{const{data:r,error:o}=await e.from(t).select("*").eq("id",a);if(o)throw o;return r[0]},o=async(t,a,r)=>{const{data:o,error:n}=await e.from(t).select("*").eq(a,r);if(n)throw n;return o},n=async(t,a)=>{const r=a.reduce(((e,t,a)=>`${e.name}:${e.foreign_key}(${e.fields}),${t.name}:${t.foreign_key}(${t.fields})`)),{data:o,error:n}=await e.from(t).select(`*,${r}`);if(n)throw n;return console.log(o),o},l=async(t,a)=>{const{data:r,error:o}=await e.from(t).insert([{...a}]);if(o)throw o;return r},i=async(t,a)=>{const{data:r,error:o}=await e.from(t).update([{...a}]).match({id:a.id});if(o)throw o;return r},s=async(t,a)=>{const{data:r,error:o}=await e.from(t).delete().match({id:a});if(o)throw o;return r},d=async(t,a,r)=>{const{data:o,error:n}=await e.from(t).delete().match({[a]:r});if(n)throw n;return o};return{getByField:o,list:t,getById:a,post:l,update:i,remove:s,removeWhere:d,joinTables:n}}},8026:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var r=a(3673),o=a(2323);const n=(0,r._)("br",null,null,-1);function l(e,t,a,l,i,s){const d=(0,r.up)("q-img"),u=(0,r.up)("q-input"),c=(0,r.up)("PrimaryButtom"),m=(0,r.up)("SecondaryButtom"),p=(0,r.up)("q-spinner"),f=(0,r.up)("q-form"),y=(0,r.up)("q-page"),g=(0,r.up)("q-layout");return(0,r.wg)(),(0,r.j4)(g,{view:"lHh Lpr lFf"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{padding:""},{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,o.C_)(["column bg-white q-gutter-md items-center",{"login-size":e.$q.screen.width>599,"absolute-center":e.$q.screen.width>599}])},[(0,r.Wm)(d,{class:"q-mb-xl",src:"img/logo-original.png",style:{height:"80%",width:"80%"}}),(0,r.Wm)(f,{onSubmit:e.handleLogin,class:"q-mt-lg"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{dense:"",modelValue:e.form.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.email=t),rounded:"",outlined:"",label:"Email","lazy-rules":"",rules:[e=>e&&e.length>0||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,r.Wm)(u,{dense:"",modelValue:e.form.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.password=t),rounded:"",outlined:"",type:"password",label:"Senha","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"]),(0,r.Wm)(c,{class:"full-width q-my-md",label:"acessar",type:"submit"}),(0,r.Wm)(m,{disable:"admin"===e.$route.query.access,label:"criar conta gratuita",link:"/register"},null,8,["disable"]),n,e.loading?((0,r.wg)(),(0,r.j4)(p,{key:0,class:"absolute-center",size:"xl",color:"primary"})):(0,r.kq)("",!0)])),_:1},8,["onSubmit"])],2)])),_:1})])),_:1})}var i=a(1959),s=a(4958),d=a(811),u=a(9582);function c(e,t,a,o,n,l){const i=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.j4)(i,{unelevated:"",to:e.link,rounded:"",label:e.label,id:e.id,type:e.type,dense:""},null,8,["to","label","id","type"])}const m=(0,r.aZ)({name:"PrimaryButtom",props:{label:{type:String,required:"Botão"},id:{type:String,default:""},link:{type:String,default:""},type:{type:String,default:""}}});var p=a(4260),f=a(2165),y=a(7518),g=a.n(y);const w=(0,p.Z)(m,[["render",c],["__scopeId","data-v-e64a3624"]]),h=w;function b(e,t,a,o,n,l){const i=(0,r.up)("q-btn");return(0,r.wg)(),(0,r.j4)(i,{unelevated:"",to:e.link,rounded:"",label:e.label,id:e.id,dense:""},null,8,["to","label","id"])}g()(m,"components",{QBtn:f.Z});const v=(0,r.aZ)({name:"SecondaryButtom",props:{label:{type:String,required:"Botão"},id:{type:String,default:""},link:{type:String,default:""}}}),q=(0,p.Z)(v,[["render",b],["__scopeId","data-v-45ed27f7"]]),_=q;g()(v,"components",{QBtn:f.Z});var Z=a(6201);const k=(0,r.aZ)({name:"LoginPage",components:{PrimaryButtom:h,SecondaryButtom:_},setup(){const e=(0,i.iH)({email:"",password:""}),t=(0,i.iH)(!1),a=(0,u.tv)(),r=(0,u.yj)(),{login:o}=(0,s.Z)(),n=async()=>{try{var n,l;let s=[];if("admin"===r.query.access){const{getByField:t}=(0,d.Z)();try{s=await t("perfil","email",e.value.email)}catch(i){s=[{profile_type_id:0}],console.error(i)}}t.value=!0,await o(e.value),3===(null===(n=s[0])||void 0===n?void 0:n.profile_type_id)?a.push({name:"painel"}):0===(null===(l=s[0])||void 0===l?void 0:l.profile_type_id)?alert("Não é usuário do tipo admin"):a.push("/home")}catch(i){alert((0,Z.y)(i.message))}finally{t.value=!1}};return{handleLogin:n,form:e,loading:t}}});var S=a(3066),B=a(4379),$=a(4027),Q=a(5269),W=a(4842),j=a(6833);const z=(0,p.Z)(k,[["render",l]]),I=z;g()(k,"components",{QLayout:S.Z,QPage:B.Z,QImg:$.Z,QForm:Q.Z,QInput:W.Z,QSpinner:j.Z})}}]);