"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[668],{811:(a,e,t)=>{t.d(e,{Z:()=>r});var o=t(2421);function r(){const{supabase:a}=(0,o["default"])(),e=async e=>{const{data:t,error:o}=await a.from(e).select("*");if(o)throw o;return t},t=async(e,t)=>{const{data:o,error:r}=await a.from(e).select("*").eq("id",t);if(r)throw r;return o[0]},r=async(e,t,o)=>{const{data:r,error:s}=await a.from(e).select("*").eq(t,o);if(s)throw s;return r},s=async(e,t)=>{const o=t.reduce(((a,e,t)=>`${a.name}:${a.foreign_key}(${a.fields}),${e.name}:${e.foreign_key}(${e.fields})`)),{data:r,error:s}=await a.from(e).select(`*,${o}`);if(s)throw s;return console.log(r),r},i=async(e,t)=>{const{data:o,error:r}=await a.from(e).insert([{...t}]);if(r)throw r;return o},l=async(e,t)=>{const{data:o,error:r}=await a.from(e).update([{...t}]).match({id:t.id});if(r)throw r;return o},n=async(e,t)=>{const{data:o,error:r}=await a.from(e).delete().match({id:t});if(r)throw r;return o},c=async(e,t,o)=>{const{data:r,error:s}=await a.from(e).delete().match({[t]:o});if(s)throw s;return r};return{getByField:r,list:e,getById:t,post:i,update:l,remove:n,removeWhere:c,joinTables:s}}},6804:(a,e,t)=>{t.d(e,{Z:()=>k});t(71);var o=t(3673),r=t(2323);const s=a=>((0,o.dD)("data-v-ac079208"),a=a(),(0,o.Cn)(),a),i={class:"q-link cursor-pointer q-ma-xs"},l={class:"row"},n={class:"col-grow-1 q-pa-xs"},c={class:"column"},d=s((()=>(0,o._)("div",{class:"col-grow-1"},[(0,o._)("div",{class:"q-approach-bar"})],-1)));function u(a,e,t,s,u,p){const m=(0,o.up)("q-rating"),f=(0,o.up)("q-banner");return(0,o.wg)(),(0,o.iD)("a",i,[(0,o.Wm)(f,{rounded:"",class:"bg-white text-grey-6 q-approach"},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",{onClick:e[0]||(e[0]=(...e)=>a.go&&a.go(...e)),class:"col q-py-xs"},(0,r.zw)(a.title.title),1),(0,o._)("div",n,[(0,o._)("div",c,[(0,o.Wm)(m,{onClick:a.addFavorit,max:"1",modelValue:a.ratingModel,"onUpdate:modelValue":e[1]||(e[1]=e=>a.ratingModel=e),name:"quality",size:"2em",color:"yellow",icon:"star_border","icon-selected":"star","no-dimming":""},null,8,["onClick","modelValue"])])]),d])])),_:1})])}t(2100);var p=t(4605),m=t(1959),f=t(9582),v=t(811),g=t(4958);const h=(0,o.aZ)({name:"ApproachButtom",props:{title:{type:Object,required:"Sem titulo"},icon:{type:String,default:"img:img/feto.png"},color:{type:String,default:""},accessCap:{type:Boolean,default:!0}},setup(a){const{user:e}=(0,g.Z)(),t=(0,f.tv)(),r=(0,m.iH)(!0),{post:s,remove:i,getByField:l}=(0,v.Z)(),n={user_id:"",approach_id:""},c=async(e,o)=>{t.push(`/approach-detail/${a.title.id}`)},d=(0,m.iH)(0),u=async()=>{try{const e=await l("favorite_approach_user","approach_id",a.title.id);e.length>0?d.value=1:d.value=0}catch(e){(0,p.s)(`falha na Operação Pelo Seguinte Erro: ${JSON.stringify(e)}`)}},h=async()=>{try{if(1!==d.value){const e=await l("favorite_approach_user","approach_id",a.title.id);await i("favorite_approach_user",e[0].id)}else n.user_id=e.value.id,n.approach_id=a.title.id,r.value=!0,await s("favorite_approach_user",n),r.value=!1,(0,p.L)(" Adicionado aos favoritos com sucesso !!!")}catch(t){(0,p.s)(JSON.stringify(t))}};return(0,o.bv)((async()=>{await u()})),{addFavorit:h,go:c,ratingModel:d}}});var w=t(4260),y=t(5607),_=t(8833),q=t(7518),Z=t.n(q);const b=(0,w.Z)(h,[["render",u],["__scopeId","data-v-ac079208"]]),k=b;Z()(h,"components",{QBanner:y.Z,QRating:_.Z})},2668:(a,e,t)=>{t.r(e),t.d(e,{default:()=>x});var o=t(3673),r=t(2323);const s=a=>((0,o.dD)("data-v-27ed24f5"),a=a(),(0,o.Cn)(),a),i={class:"column"},l={class:"col"},n=s((()=>(0,o._)("div",{class:"text-h5"},"Meus conteúdos favoritos",-1))),c=s((()=>(0,o._)("br",null,null,-1))),d=s((()=>(0,o._)("br",null,null,-1)));function u(a,e,t,s,u,p){const m=(0,o.up)("ApproachButtom"),f=(0,o.up)("q-list"),v=(0,o.up)("q-spinner"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",l,[n,(0,o.Wm)(f,{class:(0,r.C_)(["row justify-center q-pl-sm q-gutter-sm q-mt-lg",{"no-wrap":a.$q.screen.width>599}])},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.top,((a,e)=>((0,o.wg)(),(0,o.j4)(m,{class:"col-xs-12 col-sm-12 col-md-6 col-xl-3 col-lg-6",title:a,key:e},null,8,["title"])))),128))])),_:1},8,["class"])]),c,d,a.loading?((0,o.wg)(),(0,o.j4)(v,{key:0,class:"absolute-center",size:"xl",color:"primary"})):(0,o.kq)("",!0)])])),_:1})}t(2100);var p=t(4605),m=t(1959),f=t(6804),v=t(811),g=t(4958);const h=(0,o.aZ)({name:"ProfilePage",components:{ApproachButtom:f.Z},setup(){const{user:a}=(0,g.Z)(),e=(0,m.iH)(!0),{list:t}=(0,v.Z)(),{getById:o}=(0,v.Z)(),r=(0,m.iH)([]),s=(0,m.iH)([]),i=(0,m.iH)([]),l=async()=>{try{e.value=!0;const l=await t("favorite_approach_user");i.value=l.map((a=>a.user_id)),r.value=l.map((a=>a.approach_id));const n=(0,m.iH)(0);for(let e=0;e<r.value.length;e++)a.value.id!==i.value[n.value]&&(r.value.splice(e,1),--e),n.value++;r.value.forEach((async a=>{s.value.push(await o("approach",a))}))}catch(l){(0,p.s)(JSON.stringify(l.message))}finally{e.value=!1}};return{top:s,loading:e,listTopics:l,text:(0,m.iH)(""),slide:(0,m.iH)("style")}},mounted(){this.listTopics()}});var w=t(4260),y=t(4379),_=t(7011),q=t(6833),Z=t(7518),b=t.n(Z);const k=(0,w.Z)(h,[["render",u],["__scopeId","data-v-27ed24f5"]]),x=k;b()(h,"components",{QPage:y.Z,QList:_.Z,QSpinner:q.Z})}}]);