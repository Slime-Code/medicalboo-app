"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[383],{811:(e,o,a)=>{a.d(o,{Z:()=>l});var t=a(2421);function l(){const{supabase:e}=(0,t["default"])(),o=async o=>{const{data:a,error:t}=await e.from(o).select("*");if(t)throw t;return a},a=async(o,a)=>{const{data:t,error:l}=await e.from(o).select("*").eq("id",a);if(l)throw l;return t[0]},l=async(o,a,t)=>{const{data:l,error:i}=await e.from(o).select("*").eq(a,t);if(i)throw i;return l},i=async(o,a)=>{const t=a.reduce(((e,o,a)=>`${e.name}:${e.foreign_key}(${e.fields}),${o.name}:${o.foreign_key}(${o.fields})`)),{data:l,error:i}=await e.from(o).select(`*,${t}`);if(i)throw i;return console.log(l),l},n=async(o,a)=>{const{data:t,error:l}=await e.from(o).insert([{...a}]);if(l)throw l;return t},r=async(o,a)=>{const{data:t,error:l}=await e.from(o).update([{...a}]).match({id:a.id});if(l)throw l;return t},c=async(o,a)=>{const{data:t,error:l}=await e.from(o).delete().match({id:a});if(l)throw l;return t},d=async(o,a,t)=>{const{data:l,error:i}=await e.from(o).delete().match({[a]:t});if(i)throw i;return l};return{getByField:l,list:o,getById:a,post:n,update:r,remove:c,removeWhere:d,joinTables:i}}},8383:(e,o,a)=>{a.r(o),a.d(o,{default:()=>J});var t=a(3673),l=a(2323),i=a(8880);const n=(0,t._)("div",{class:"text-h5 q-pa-sm"},"Abordagens",-1),r={class:"row items-center"},c=["innerHTML"],d={class:"row q-pa-md q-gutter-sm"},s=(0,t._)("div",{class:"text-h6"},"Nova Abordagem",-1),p={class:"row"},u={class:"col-12"};function m(e,o,a,m,f,_){const w=(0,t.up)("q-space"),h=(0,t.up)("q-btn"),g=(0,t.up)("q-spinner-facebook"),y=(0,t.up)("q-card-section"),b=(0,t.up)("q-separator"),v=(0,t.up)("q-item-section"),k=(0,t.up)("q-input"),C=(0,t.up)("q-editor"),W=(0,t.up)("q-card"),q=(0,t.up)("q-expansion-item"),Z=(0,t.up)("q-list"),Q=(0,t.up)("q-slide-transition"),V=(0,t.up)("q-td"),x=(0,t.up)("q-tooltip"),A=(0,t.up)("q-tr"),T=(0,t.up)("q-table"),z=(0,t.up)("q-select"),S=(0,t.up)("q-checkbox"),$=(0,t.up)("q-card-actions"),D=(0,t.up)("q-form"),U=(0,t.up)("q-dialog"),H=(0,t.up)("q-inner-loading"),I=(0,t.up)("q-page"),F=(0,t.Q2)("ripple"),L=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(I,{class:"q-pa-md"},{default:(0,t.w5)((()=>[n,(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(y,{class:"q-px-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{flat:"",bordered:""},{default:(0,t.w5)((()=>[e.currentApproach?((0,t.wg)(),(0,t.j4)(y,{key:0,class:"row"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.currentApproach.title)+" ",1),(0,t.Wm)(w),(0,t.Wm)(h,{flat:"",round:"",icon:"close",dense:"",onClick:o[0]||(o[0]=o=>e.currentApproach=null)}),(0,t.Wm)(h,{flat:"",loading:e.loadingContent,round:"",icon:"save",dense:"",onClick:o[1]||(o[1]=o=>e.saveContent())},{loading:(0,t.w5)((()=>[(0,t.Wm)(g)])),_:1},8,["loading"])])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(b),(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.contents,((o,a)=>((0,t.wg)(),(0,t.j4)(Z,{key:a,bordered:"",class:"rounded-borders q-my-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{label:"Conteúdo"},{header:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(o.title),1)])),_:2},1024),(0,t.Wm)(v,{side:""},{default:(0,t.w5)((()=>[(0,t._)("div",r,[(0,t.Wm)(h,{icon:"cancel",color:"red",round:"",flat:"",onClick:o=>e.removeContent(a)},null,8,["onClick"])])])),_:2},1024)])),default:(0,t.w5)((()=>[(0,t.Wm)(b),(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{rules:[e=>!!e||"Campo obrigatório"],outlined:"",label:"Título",dense:"",modelValue:e.contents[a].title,"onUpdate:modelValue":o=>e.contents[a].title=o},null,8,["rules","modelValue","onUpdate:modelValue"]),(0,t.Wm)(C,{modelValue:e.contents[a].content,"onUpdate:modelValue":o=>e.contents[a].content=o,"min-height":"8rem",toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["modelValue","onUpdate:modelValue","toolbar"]),(0,t._)("div",{innerHTML:e.contents[a].content},null,8,c)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),(0,t.Wm)(h,{class:"q-mb-sm",icon:"add",color:"primary",outline:"",label:"Adicionar conteúdo","no-caps":"",onClick:e.addContent},null,8,["onClick"])])),_:1})])),_:1})])),_:1},512),[[i.F8,e.currentApproach]])])),_:1}),(0,t.Wm)(W,{class:"q-mb-sm",flat:"",bordered:""},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(k,{class:"col-7 col-sm-7 col-md-7 col-xs-12 col-lg-7 col-xl-7",modelValue:e.filter,"onUpdate:modelValue":o[2]||(o[2]=o=>e.filter=o),placeholder:"Pesquisar abordagem",dense:"",outlined:""},null,8,["modelValue"]),(0,t.Wm)(w),(0,t.Wm)(h,{class:"col-2 col-sm-2 col-md-2 col-xs-12 col-lg-2 col-xl-2",color:"primary",label:"Nova abordagem",onClick:o[3]||(o[3]=o=>e.newDialog()),"no-caps":"",rounded:""}),(0,t.Wm)(h,{class:"col-2 col-sm-2 col-md-2 col-xs-12 col-lg-2 col-xl-2",color:"primary",label:"Atualizar",onClick:o[4]||(o[4]=o=>e.getAproaches()),"no-caps":"",rounded:""})])])),_:1}),(0,t.Wm)(T,{color:"primary",dense:e.$q.screen.lt.xs,flat:"",square:"",bordered:"",loading:e.loadingTable,rows:e.rows,columns:e.columns,"visible-columns":["title","options","topic","type_approach","criado"],"row-key":"title",separator:"cell",filter:e.filter},{body:(0,t.w5)((o=>[(0,t.Wm)(A,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{key:"title",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(o.row.title),1)])),_:2},1032,["props"]),(0,t.Wm)(V,{class:"text-left",key:"topic",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(o.row.topic),1)])),_:2},1032,["props"]),(0,t.Wm)(V,{class:"text-left",key:"type_approach",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(o.row.type_approach),1)])),_:2},1032,["props"]),(0,t.Wm)(V,{class:"text-left",key:"criado",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)(" Yuri Rego aos: "+(0,l.zw)(new Date(o.row.created_at).toLocaleString("en-GB",{timeZone:"UTC"})),1)])),_:2},1032,["props"]),(0,t.Wm)(V,{key:"options",class:"text-left",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{icon:"content_copy",disable:!o.row.link,flat:"",round:"",size:"sm",dense:"",onClick:a=>e.copyTo(o.row.id)},{default:(0,t.w5)((()=>[(0,t.Wm)(x,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(o.row.link?"Copiar conteúdo como Hyperlink":"Não conteúdo Hyperlink"),1)])),_:2},1024)])),_:2},1032,["disable","onClick"]),(0,t.Wm)(h,{flat:"",round:"",size:"sm",icon:"edit",onClick:a=>e.newDialog(o.row),dense:""},null,8,["onClick"]),(0,t.Wm)(h,{flat:"",round:"",size:"sm",icon:"source",onClick:a=>e.getContents(o.row),dense:""},null,8,["onClick"]),(0,t.Wm)(h,{flat:"",round:"",size:"sm",icon:"delete",onClick:a=>e.confirmDelete(o.row.id),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["dense","loading","rows","columns","filter"]),(0,t.Wm)(U,{modelValue:e.showAddApproach,"onUpdate:modelValue":o[10]||(o[10]=o=>e.showAddApproach=o),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"full-width"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{onSubmit:e.saveItem},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{class:"q-py-sm"},{default:(0,t.w5)((()=>[s])),_:1}),(0,t.Wm)(b),(0,t.Wm)(y,{class:"scroll",style:{"max-height":"55vh"}},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.Wm)(k,{class:"col-12",rules:[e=>!!e||"Campo obrigatório"],outlined:"",label:"Titulo",dense:"",modelValue:e.formData.title,"onUpdate:modelValue":o[5]||(o[5]=o=>e.formData.title=o),modelModifiers:{trim:!0},autofocus:""},null,8,["rules","modelValue"]),(0,t.Wm)(z,{class:"col-12",rules:[e=>!!e||"Campo obrigatório"],dense:"",outlined:"",modelValue:e.formData.topic_id,"onUpdate:modelValue":o[6]||(o[6]=o=>e.formData.topic_id=o),options:e.optionsTopic,label:"Topico"},null,8,["rules","modelValue","options"]),(0,t.Wm)(z,{class:"col-12",rules:[e=>!!e||"Campo obrigatório"],dense:"",outlined:"",modelValue:e.formData.type_approach_id,"onUpdate:modelValue":o[7]||(o[7]=o=>e.formData.type_approach_id=o),options:e.optionsAproach,label:"Tipo de Abordagem"},null,8,["rules","modelValue","options"]),(0,t._)("div",u,[(0,t.Wm)(S,{modelValue:e.formData.link,"onUpdate:modelValue":o[8]||(o[8]=o=>e.formData.link=o),class:"col-4",label:"Conteúdo hyperlink"},null,8,["modelValue"])])])])),_:1}),(0,t.Wm)(b),(0,t.Wm)($,{align:"right"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(h,{label:"Cancelar ",onClick:o[9]||(o[9]=o=>e.loadingForm=!1),color:"primary","no-caps":"",dense:""},null,512),[[F],[L]]),(0,t.wy)((0,t.Wm)(h,{label:"Salvar",color:"primary",dense:"",type:"submit","no-caps":""},null,512),[[F]])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(H,{showing:e.loadingForm,label:"Carregando dados...","label-class":"text-primary",color:"primary","label-style":"font-size: 1.1em"},null,8,["showing"])])),_:1})}var f=a(1959),_=a(8825),w=a(1914),h=a(811);const g=[{name:"title",required:!0,label:"Título",align:"left",field:"title",sortable:!0},{name:"topic",align:"left",label:"Tópico",field:"topic",sortable:!0},{name:"type_approach",align:"left",label:"Tipo de abordagem",field:"type_approach",sortable:!0},{name:"criado",align:"left",label:"Criado Por",field:"criado Por",sortable:!0},{name:"options",align:"left",label:"Ação",field:"options",sortable:!0}],y=(0,t.aZ)({setup(){const e=(0,_.Z)(),o=(0,f.iH)(!1),a=(0,f.iH)(!1),{list:l,joinTables:i,post:n,update:r,removeWhere:c,remove:d,getById:s,getByField:p}=(0,h.Z)(),u=(0,f.iH)([]),m=(0,f.iH)(null),y=(0,f.iH)(null),b=(0,f.iH)(!1),v=(0,f.qj)({title:"",topic_id:null,type_approach_id:null,link:!1}),k=async()=>{const e=await l("type_approach"),o=await l("topic");m.value=e.map((e=>({label:e.type_approach,value:e.id}))),y.value=o.map((e=>({label:e.name,value:e.id})))},C=async()=>{try{a.value=!0;const e=await i("approach",[{name:"topic",foreign_key:"topic_id",fields:"name"},{name:"type_approach",foreign_key:"type_approach_id",fields:"type_approach"}]);u.value=e.map((e=>({id:e.id,title:e.title,link:e.link,type_approach_id:e.type_approach_id,topic_id:e.topic_id,topic:e.topic.name,type_approach:e.type_approach.type_approach,created_at:e.created_at}))),a.value=!1}catch(e){a.value=!1,alert(e)}},W=async e=>{await c("approach_contents","id_approach",e),await c("favorite_approach_user","approach_id",e),await c("definicao","approach_id",e),await c("exameComplementar","approach_id",e),await d("approach",e),C()};(0,t.bv)((()=>{C(),k()}));const q=async e=>{if(e){o.value=!0;const a=await s("type_approach",e.type_approach_id),t=await s("topic",e.topic_id);v.title=e.title,v.id=e.id,v.link=e.link,o.value=!1,v.type_approach_id={label:a.type_approach,value:a.id},v.topic_id={label:t.name,value:t.id}}else x.value=[],v.title="",v.topic_id=null,v.type_approach_id=null;b.value=!0},Z=async()=>{try{b.value=!1,o.value=!0;let e=v.id;if(v.id)v.topic_id=v.topic_id.value,v.type_approach_id=v.type_approach_id.value,await r("approach",v);else{delete v.id,v.topic_id=v.topic_id.value,v.type_approach_id=v.type_approach_id.value;const o=await n("approach",v);e=o[0].id}C(),o.value=!1}catch(e){alert(e)}};function Q(o){e.dialog({title:"Eliminar registro",message:"Gostaria de apagar este registro?",persistent:!0,cancel:"Cancelar"}).onOk((()=>{W(o)})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}const V=(0,f.iH)(""),x=(0,f.iH)([]),A=()=>{x.value.push({title:"Novo conteúdo",content:""})},T=(0,f.iH)(),z=(0,f.iH)(!1),S=async()=>{x.value.forEach((async e=>{const o={title:e.title,content:e.content,id:e.id,id_approach:T.value.id};z.value=!0,e.id?await r("approach_contents",o):(delete o.id,await n("approach_contents",o)),z.value=!1}))},$=o=>{if(x.value[o].id){const{id:a}=x.value[o];e.dialog({title:"Eliminar conteúdo",message:`Gostaria de apagar conteúdo ${x.value[o].title} ?`,persistent:!0,cancel:"Cancelar"}).onOk((async()=>{await d("approach_contents",a),e.notify({message:"Conteúdo apagado com sucesso!!"})}))}x.value.splice(o,1)},D=async e=>{T.value=e,o.value=!0,x.value=await p("approach_contents","id_approach",T.value.id),o.value=!1},U=o=>{(0,w.Z)(`${window.location.origin}/content/${o}`).then((()=>{e.notify({message:"Conteúdo copiado"})})).catch((()=>{}))};return{copyTo:U,getContents:D,loadingContent:z,saveContent:S,contents:x,loadingForm:o,loadingTable:a,addContent:A,removeContent:$,filter:V,newDialog:q,showAddApproach:b,formData:v,optionsAproach:m,optionsTopic:y,saveItem:Z,currentApproach:T,deleteItem:W,confirmDelete:Q,columns:g,rows:u,getAproaches:C}}});var b=a(4260),v=a(4379),k=a(2471),C=a(5589),W=a(151),q=a(2025),Z=a(2165),Q=a(8719),V=a(5869),x=a(7011),A=a(429),T=a(2035),z=a(4842),S=a(9859),$=a(8468),D=a(8186),U=a(3884),H=a(8870),I=a(6778),F=a(5269),L=a(3017),j=a(5735),B=a(9367),N=a(6941),P=a(2350),E=a(1007),G=a(3812),M=a(6489),O=a(677),R=a(7518),Y=a.n(R);const K=(0,b.Z)(y,[["render",m]]),J=K;Y()(y,"components",{QPage:v.Z,QSlideTransition:k.Z,QCardSection:C.Z,QCard:W.Z,QSpace:q.Z,QBtn:Z.Z,QSpinnerFacebook:Q.Z,QSeparator:V.Z,QList:x.Z,QExpansionItem:A.Z,QItemSection:T.Z,QInput:z.Z,QEditor:S.Z,QTable:$.Z,QTr:D.Z,QTd:U.Z,QTooltip:H.Z,QDialog:I.Z,QForm:F.Z,QSelect:L.Z,QCheckbox:j.Z,QCardActions:B.Z,QInnerLoading:N.Z,QItemLabel:P.Z,QPageSticky:E.Z,QHeader:G.Z}),Y()(y,"directives",{Ripple:M.Z,ClosePopup:O.Z})}}]);