"use strict";(self["webpackChunkmedicalbookapp"]=self["webpackChunkmedicalbookapp"]||[]).push([[685],{811:(e,a,l)=>{l.d(a,{Z:()=>o});var t=l(2421);function o(){const{supabase:e}=(0,t["default"])(),a=async a=>{const{data:l,error:t}=await e.from(a).select("*");if(t)throw t;return l},l=async(a,l)=>{const{data:t,error:o}=await e.from(a).select("*").eq("id",l);if(o)throw o;return t[0]},o=async(a,l,t)=>{const{data:o,error:r}=await e.from(a).select("*").eq(l,t);if(r)throw r;return o},r=async(a,l)=>{const t=l.reduce(((e,a,l)=>`${e.name}:${e.foreign_key}(${e.fields}),${a.name}:${a.foreign_key}(${a.fields})`)),{data:o,error:r}=await e.from(a).select(`*,${t}`);if(r)throw r;return console.log(o),o},i=async(a,l)=>{const{data:t,error:o}=await e.from(a).insert([{...l}]);if(o)throw o;return t},n=async(a,l)=>{const{data:t,error:o}=await e.from(a).update([{...l}]).match({id:l.id});if(o)throw o;return t},u=async(a,l)=>{const{data:t,error:o}=await e.from(a).delete().match({id:l});if(o)throw o;return t},s=async(a,l,t)=>{const{data:o,error:r}=await e.from(a).delete().match({[l]:t});if(r)throw r;return o};return{getByField:o,list:a,getById:l,post:i,update:n,remove:u,removeWhere:s,joinTables:r}}},7685:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ae});l(71);var t=l(3673),o=l(2323),r=l(8880);const i=e=>((0,t.dD)("data-v-4d508999"),e=e(),(0,t.Cn)(),e),n={class:"column",align:"center"},u={class:"col item"},s=i((()=>(0,t._)("br",null,null,-1))),d=i((()=>(0,t._)("br",null,null,-1))),m=(0,t.Uk)(),c=i((()=>(0,t._)("br",null,null,-1))),p=(0,t.Uk)(),f=i((()=>(0,t._)("br",null,null,-1))),_=i((()=>(0,t._)("hr",null,null,-1))),v={class:"col item"},y={class:"col item"},b={class:"column q-ma-md"},w={class:"col"},h={class:"self-center full-width no-outline",tabindex:"0"},g={class:"self-center full-width no-outline",tabindex:"0"},x={class:"self-center full-width no-outline",tabindex:"0"},D={class:"self-center full-width no-outline",tabindex:"0"},W={class:"self-center full-width no-outline",tabindex:"0"},q={class:"self-center full-width no-outline",tabindex:"0"},V=i((()=>(0,t._)("div",{class:"text-h6"},"Novo Perfil",-1))),P={class:"q-mb-md"},k={class:"q-mb-md"},z={class:"q-mb-md"},Z={class:"q-mb-md"},C={class:"q-mb-md"},A={class:"q-mb-md"};function Q(e,a,l,i,Q,U){const R=(0,t.up)("q-btn"),$=(0,t.up)("q-spinner"),E=(0,t.up)("q-field"),H=(0,t.up)("q-card-section"),S=(0,t.up)("q-input"),B=(0,t.up)("q-option-group"),F=(0,t.up)("q-card-actions"),N=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),K=(0,t.up)("q-page"),j=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(K,{class:"flex flex-center"},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",u,[s,d,(0,t.Wm)(R,{onClick:a[0]||(a[0]=a=>e.showAdPerfil=!0),style:{color:"#1378B3",margin:"2px #004A9D"},label:"Editar Informações",icon:"edit"}),m,c,p,f,_]),(0,t._)("div",v,[(0,t.Wm)(R,{size:"9px",style:{color:"#E8A40F"},flat:"",icon:"fas fa-crown"}),(0,t.Wm)(R,{style:{padding:"0px"},size:"12px",flat:"",label:"Parabens! você Já é um usuário prime"})]),e.loading?((0,t.wg)(),(0,t.j4)($,{key:0,class:"absolute-center",size:"xl",color:"primary"})):(0,t.kq)("",!0),(0,t._)("div",y,[(0,t._)("div",b,[(0,t._)("div",w,[(0,t.Wm)(E,{label:"Nome Completo","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",h,(0,o.zw)(e.aux.user_metadata.name),1)])),_:1}),(0,t.Wm)(E,{label:"Dta de Nascimento","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",g,(0,o.zw)(e.aux.user_metadata.birthday),1)])),_:1}),(0,t.Wm)(E,{label:"E-mail","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",x,(0,o.zw)(e.aux.email),1)])),_:1}),(0,t.Wm)(E,{label:"Celular","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",D,(0,o.zw)(e.aux.phone),1)])),_:1}),(0,t.Wm)(E,{label:"UF","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",W,(0,o.zw)(e.aux.user_metadata.cpf),1)])),_:1}),(0,t.Wm)(E,{label:"Perfil","stack-label":""},{control:(0,t.w5)((()=>[(0,t._)("div",q,(0,o.zw)(e.profile_type),1)])),_:1})])])])]),(0,t.Wm)(I,{modelValue:e.showAdPerfil,"onUpdate:modelValue":a[13]||(a[13]=a=>e.showAdPerfil=a),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(N,{class:"q-pa-md",style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[V])),_:1}),(0,t._)("form",{onSubmit:a[12]||(a[12]=(0,r.iM)(((...a)=>e.updatePerfile&&e.updatePerfile(...a)),["prevent"]))},[(0,t.Wm)(H,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t._)("div",P,[(0,t.Wm)(S,{label:"Nome",dense:"",modelValue:e.formData.name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.name=a),autofocus:"",onKeyup:a[2]||(a[2]=(0,r.D2)((a=>e.prompt=!1),["enter"])),"lazy-rules":"",rules:e.titleRules,ref:"title"},null,8,["modelValue","rules"])]),(0,t._)("div",k,[(0,t.Wm)(S,{dense:"",modelValue:e.formData.birthday,"onUpdate:modelValue":a[3]||(a[3]=a=>e.formData.birthday=a),type:"date",label:"Data de nascimento",onKeyup:a[4]||(a[4]=(0,r.D2)((a=>e.prompt=!1),["enter"])),"lazy-rules":"",rules:[e=>null!==e&&""!==e||"Campo não pode estar vazio"]},null,8,["modelValue","rules"])]),(0,t._)("div",z,[(0,t.Wm)(S,{label:"E-mail",dense:"",modelValue:e.formData.email,"onUpdate:modelValue":a[5]||(a[5]=a=>e.formData.email=a),autofocus:"",onKeyup:a[6]||(a[6]=(0,r.D2)((a=>e.prompt=!1),["enter"])),"lazy-rules":"",rules:e.diagnosisRules,ref:"diagnosis"},null,8,["modelValue","rules"])]),(0,t._)("div",Z,[(0,t.Wm)(S,{label:"Telefone",dense:"",modelValue:e.formData.phone,"onUpdate:modelValue":a[7]||(a[7]=a=>e.formData.phone=a),autofocus:"",onKeyup:a[8]||(a[8]=(0,r.D2)((a=>e.prompt=!1),["enter"])),"lazy-rules":"",rules:e.complentary_examsRules,ref:"complentary_exams"},null,8,["modelValue","rules"])]),(0,t._)("div",C,[(0,t.Wm)(S,{label:"CPF",dense:"",modelValue:e.formData.cpf,"onUpdate:modelValue":a[9]||(a[9]=a=>e.formData.cpf=a),autofocus:"",onKeyup:a[10]||(a[10]=(0,r.D2)((a=>e.prompt=!1),["enter"])),"lazy-rules":"",rules:e.complentary_examsRules,ref:"complentary_exams"},null,8,["modelValue","rules"])]),(0,t._)("div",A,[(0,t.Wm)(B,{modelValue:e.formData.profile_type_id,"onUpdate:modelValue":a[11]||(a[11]=a=>e.formData.profile_type_id=a),options:e.type,color:"primary",inline:""},null,8,["modelValue","options"])])])),_:1}),(0,t.Wm)(F,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(R,{flat:"",label:"Cancelar"},null,512),[[j]]),(0,t.wy)((0,t.Wm)(R,{type:"submit",flat:"",label:"Adicionar"},null,512),[[j]])])),_:1})],32)])),_:1})])),_:1},8,["modelValue"])])),_:1})}l(2100);var U=l(1959),R=l(4958),$=l(4605),E=l(811);const H=(0,t.aZ)({name:"MeusDados",setup(){const e=(0,U.iH)(!0),a=(0,U.iH)({id:null,phone:"",profile_type_id:null,birthday:"",name:"",cpf:"",email:""}),{getById:l,list:o,update:r}=(0,E.Z)(),{user:i}=(0,R.Z)(),n=(0,U.iH)(),u=(0,U.iH)(i),{profile_type_id:s}=u.value.user_metadata,{email:d,phone:m,id:c}=u.value,{name:p,cpf:f,birthday:_}=u.value.user_metadata,v=(0,U.iH)(""),y=(0,U.iH)([{label:"Estudante",value:1},{label:"Profissional",value:2}]),b=async()=>{try{a.value.profile_type_id=s,e.value=!0,n.value=await l("profile_type",s),v.value=n.value.name,e.value=!1}catch(t){(0,$.s)(`A Resposta do banco Não Foi Bem Sucedida Pelo Seguinte Erro: ${t}`)}},w=async()=>{try{e.value=!0;const l=await o("perfil");l.forEach((async e=>{e.user_id===c&&(a.value.id=e.id,u.value.phone=a.value.phone,u.value.user_metadata.name=a.value.name,u.value.user_metadata.birthday=a.value.birthday,u.value.user_metadata.email=a.value.email,u.value.email=a.value.email,u.value.user_metadata.profile_type_id=a.value.profile_type_id,u.value.user_metadata.cpf=a.value.cpf,i.value=u.value)})),delete a.value.email,await r("perfil",a.value),e.value=!1,(0,$.L)("Atualizado com sucesso!!")}catch(l){e.value=!1,(0,$.s)(`A Atualização Não Foi Bem Sucedida Pelo Seguinte Erro: ${l}`),alert(JSON.stringify(l))}};return(0,t.bv)((()=>{b()})),{aux:u,aux1:n,loading:e,type:y,updatePerfile:w,formData:a,phone:m,profile_type:v,birthday:_,name:p,cpf:f,email:d,slide:(0,U.iH)("style"),showAdPerfil:(0,U.iH)(!1),titleRules:[e=>e&&e.length>0||"Por favor digite alguma coisa"],definitionRules:[e=>e&&e.length>0||"Por favor digite alguma coisa"],diagnosisRules:[e=>e&&e.length>0||"Por favor digite alguma coisa"],complentary_examsRules:[e=>e&&e.length>0||"Por favor digite alguma coisa"]}}});var S=l(4260),B=l(4379),F=l(2165),N=l(6833),I=l(6115),K=l(6778),j=l(151),J=l(5589),M=l(4842),O=l(8758),T=l(9367),G=l(4554),L=l(677),X=l(7518),Y=l.n(X);const ee=(0,S.Z)(H,[["render",Q],["__scopeId","data-v-4d508999"]]),ae=ee;Y()(H,"components",{QPage:B.Z,QBtn:F.Z,QSpinner:N.Z,QField:I.Z,QDialog:K.Z,QCard:j.Z,QCardSection:J.Z,QInput:M.Z,QOptionGroup:O.Z,QCardActions:T.Z,QIcon:G.Z}),Y()(H,"directives",{ClosePopup:L.Z})}}]);